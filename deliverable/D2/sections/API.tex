\section{Web APIs}
Le specifiche delle API sono state documentate secondo lo standard OpenAPI 3.0.1 e la documentazione è consultabile pubblicamente al seguente indirizzo: 
\url{https://380vqprxjy.apidog.io}

\paragraph{Progettazione e scelte architetturali}
L'architettura segue i principi RESTful, organizzando le risorse in modo gerarchico. In fase di progettazione è stato deciso di standardizzare le risposte di errore, ottimizzare la gestione delle collezioni (tramite l'utilizzo di metadati per distinguere la pagina ed il numero di elementi necessari) e utilizzare ampiamente schemi ed ereditarietà dei componenti (abbiamo per esempio creato versioni standard e dettagliate per vari schemi in modo da ridurre i dati inutilizzati). Abbiamo inoltre fatto attenzione nell'aggiungere regole di validazione all'interno schemi delle api, come per esempio l'uso di enum per gli stati delle iniziative.

Le specifiche delle APIs sono disponibili al seguente indirizzo:
\url{https://github.com/Eneo-org/NomeApp/blob/main/server/APIsDocumentazione/AllAPIs.yaml} 
e sono riportate di seguito: 

\begin{minted}{yaml}
openapi: 3.0.1
info:
  title: Default module
  description: ''
  version: 1.0.0
tags:
  - name: Initiatives
  - name: ParticipatoryBudgets
  - name: Users
  - name: Users/Auth
  - name: Filters
paths:
  /initiatives:
    get:
      summary: initiativesList
      deprecated: false
      description: >-
        Restituisce la lista delle iniziative. Supporta parametri per
        l'applicazione di filtri alla ricerca, per la ricerca testuale e
        l'ordinamento.
      tags:
        - Initiatives
      parameters:
        - name: currentPage
          in: query
          description: Numero della pagina per la paginazione.
          required: false
          example: 1
          schema:
            type: integer
        - name: objectsPerPage
          in: query
          description: Numero di elementi per pagina.
          required: false
          example: 10
          schema:
            type: integer
        - name: status
          in: query
          description: Filtro per lo stato dell'iniziativa.
          required: false
          example: In corso
          schema:
            type: string
        - name: search
          in: query
          description: Ricerca libera nel titolo, descrizione e luogo.
          required: false
          example: Parco
          schema:
            type: string
        - name: categoryID
          in: query
          description: ID univoco della categoria (filtro per categoria).
          required: false
          example: Sport
          schema:
            type: integer
        - name: sortBy
          in: query
          description: Codice relativo ad un attributo su cui bisogna ordinare.
          required: false
          example: 1
          schema:
            type: integer
        - name: order
          in: query
          description: La direzione dell'ordinamento (asc o desc).
          required: false
          example: desc
          schema:
            type: string
            enum:
              - asc
              - desc
        - name: minSignatures
          in: query
          description: Limite inferiore di firme da mostrare.
          required: false
          example: 0
          schema:
            type: integer
        - name: maxSignatures
          in: query
          description: Limite superiore di firme da mostrare.
          required: false
          example: 1000
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Initiative'
                    minItems: 100
                    maxItems: 100
                  meta:
                    $ref: '#/components/schemas/MetaDataList'
                required:
                  - data
                  - meta
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
    post:
      summary: createInitiative
      deprecated: false
      description: Permette a un cittadino autenticato di creare una nuova iniziativa.
      tags:
        - Initiatives
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: Simula l'utente loggato
          required: true
          example: 1
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  description: Titolo dell'iniziativa.
                  type: string
                  example: ''
                description:
                  description: Descrizione dettagliata della proposta.
                  type: string
                  example: ''
                place:
                  description: Luogo o area di interesse.
                  type: string
                  example: ''
                categoryId:
                  type: integer
                  description: ID univoco della categoria.
                  example: 0
                attachments:
                  format: binary
                  type: string
                  description: Eventuali allegati (Immagini o PDF).
                  example: ''
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedInitiative'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '422':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /initiatives/{id}:
    get:
      summary: initiativeDetails
      deprecated: false
      description: >-
        Restituisce i dettagli completi di una singola iniziativa selezionata
        dall'utente.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedInitiative'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
    patch:
      summary: changeExpirationDate
      deprecated: false
      description: >-
        Permette all'amministrazione di prorogare la data di scadenza di
        un'iniziativa.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                expirationDate:
                  type: string
                  format: date
                  description: Nuova data di scadenza.
              required:
                - expirationDate
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedInitiative'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '422':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /initiatives/{id}/responses:
    post:
      summary: createReply
      deprecated: false
      description: >-
        Permette all'amministrazione di inviare una risposta ufficiale a
        un'iniziativa, cambiandone lo stato da 'In corso' a 'Respinta' oppure
        'Approvata'.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                status:
                  description: Nuovo stato dell'iniziativa ('Respinta' o 'Approvata').
                  type: string
                  example: ''
                motivations:
                  description: Testo di esposizione delle motivazioni della risposta.
                  type: string
                  example: ''
                attachments:
                  format: binary
                  type: string
                  description: Eventuali allegati (immagini o PDF).
                  example: ''
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Reply'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /initiatives/{id}/signatures:
    post:
      summary: signInitiative
      deprecated: false
      description: Permette a un cittadino di firmare un'iniziativa.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeSignature'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /initiatives/{id}/follows:
    post:
      summary: saveIniziative
      deprecated: false
      description: >-
        Salva un'iniziativa nella lista delle iniziative seguite dall'utente
        affinché possa monitorarne lo stato.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavedInitiative'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
    delete:
      summary: removeFromSavedInitiatives
      deprecated: false
      description: Rimuove l'iniziativa dalla lista delle iniziative seguite.
      tags:
        - Initiatives
      parameters:
        - name: id
          in: path
          description: ID univoco dell'iniziativa.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  initiativeId:
                    type: integer
                required:
                  - message
                  - initiativeId
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /initiatives/admin/expiring:
    get:
      summary: getExpiringInitiatives
      deprecated: false
      description: >-
        Restituisce le iniziative in scadenza entro 7 giorni. Solo per
        amministratori.
      tags:
        - Initiatives
      parameters:
        - name: currentPage
          in: query
          description: Numero della pagina per la paginazione.
          required: false
          example: 1
          schema:
            type: integer
        - name: objectsPerPage
          in: query
          description: Numero di elementi per pagina.
          required: false
          example: 5
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: Simula l'utente loggato (deve essere admin)
          required: true
          example: 1
          schema:
            type: integer
      responses:
        '200':
          description: Lista delle iniziative in scadenza.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Initiative'
                  meta:
                    $ref: '#/components/schemas/MetaDataList'
                required:
                  - data
                  - meta
          headers: {}
        '401':
          description: Utente non autenticato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: L'utente non ha privilegi di amministratore.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '500':
          description: Errore del server.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /initiatives/cooldown:
    get:
      summary: checkCooldown
      deprecated: false
      description: >-
        Verifica se l'utente può creare una nuova iniziativa (controlla il
        periodo di cooldown di 14 giorni dall'ultima iniziativa creata).
      tags:
        - Initiatives
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: Simula l'utente loggato
          required: true
          example: 1
          schema:
            type: integer
      responses:
        '200':
          description: Informazioni sul cooldown.
          content:
            application/json:
              schema:
                type: object
                properties:
                  canCreate:
                    type: boolean
                    description: Indica se l'utente può creare una nuova iniziativa.
                  daysRemaining:
                    type: integer
                    description: >-
                      Numero di giorni rimanenti prima di poter creare una nuova
                      iniziativa.
                    nullable: true
                  lastInitiativeDate:
                    type: string
                    format: date
                    description: Data dell'ultima iniziativa creata.
                    nullable: true
                required:
                  - canCreate
          headers: {}
        '401':
          description: Utente non autenticato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '500':
          description: Errore del server.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /participatory-budgets:
    post:
      summary: createParticipatoryBudget
      deprecated: false
      description: Creazione di un nuovo bilancio partecipativo.
      tags:
        - ParticipatoryBudgets
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParticipatoryBudget'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  options:
                    type: array
                    items:
                      $ref: '#/components/schemas/PBOption'
                    minItems: 3
                    maxItems: 3
                    description: Array di opzioni.
                  id:
                    type: integer
                    description: ID univoco del bilancio partecipativo.
                  creatorId:
                    type: integer
                    description: ID univoco del creatore del bilancio partecipativo.
                  title:
                    type: string
                    description: Titolo del bilancio partecipativo.
                  createdAt:
                    type: string
                    format: date-time
                    description: Data di creazione.
                  expirationDate:
                    type: string
                    format: date
                    description: Data di scadenza.
                  votedOptionId:
                    type: integer
                    description: ID dell'opzione votata.
                required:
                  - votedOptionId
                  - options
                  - id
                  - creatorId
                  - title
                  - createdAt
                  - expirationDate
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
    get:
      summary: participatoryBudgetsArchive
      deprecated: false
      description: Restituisce l'archivio storico dei bilanci partecipativi conclusi.
      tags:
        - ParticipatoryBudgets
      parameters:
        - name: currentPage
          in: query
          description: Numero della pagina per la paginazione.
          required: false
          example: 1
          schema:
            type: integer
        - name: objectsPerPage
          in: query
          description: Numero di elementi per pagina.
          required: false
          example: 10
          schema:
            type: integer
        - name: X-Mock-User-id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ParticipatoryBudget'
                    minItems: 1
                    maxItems: 5
                  meta:
                    $ref: '#/components/schemas/MetaDataList'
                required:
                  - data
                  - meta
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /participatory-budgets/active:
    get:
      summary: participatoryBudgetDetails
      deprecated: false
      description: Restituisce i dettagli di un bilancio partecipativo.
      tags:
        - ParticipatoryBudgets
      parameters:
        - name: status
          in: query
          description: Filtro per stato (attivo o non).
          required: false
          schema:
            type: string
            enum:
              - active
              - notActive
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  votedOptionId:
                    type: integer
                    description: >-
                      Identifica l'opzione che l'utente ha votato se ha già
                      votato. 
                    nullable: true
                  options:
                    type: array
                    items:
                      $ref: '#/components/schemas/PBOption'
                    minItems: 3
                    maxItems: 3
                    description: Array di opzioni.
                  id:
                    type: integer
                    description: ID univoco del bilancio partecipativo.
                  creatorId:
                    type: integer
                    description: ID univoco del creatore del bilancio partecipativo.
                  title:
                    type: string
                    description: Titolo del bilancio partecipativo.
                  createdAt:
                    type: string
                    format: date-time
                    description: Data di creazione.
                  expirationDate:
                    type: string
                    format: date
                    description: Data di scadenza.
                required:
                  - options
                  - id
                  - creatorId
                  - title
                  - createdAt
                  - expirationDate
          headers: {}
      security: []
  /participatory-budgets/{id}/votes:
    post:
      summary: voteParticipatoryBudget
      deprecated: false
      description: >-
        Permette a un cittadino di esprimere il proprio voto per una delle
        opzioni del bilancio partecipativo.
      tags:
        - ParticipatoryBudgets
      parameters:
        - name: id
          in: path
          description: ID univoco del bilancio partecipativo.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                position:
                  type: integer
                  minimum: 2
                  maximum: 5
                  description: Posizione dell'opzione scelta.
              required:
                - position
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParticipatoryBudget'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /auth/google:
    post:
      summary: loginAndAuth
      deprecated: false
      description: >-
        Autenticazione utente tramite provider esterno. Verifica l'identità e
        restituisce il token di sessione.
      tags:
        - Users/Auth
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tokenId:
                  type: string
                  description: Token fornito dal provider di identità.
              required:
                - tokenId
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                title: ''
                type: object
                properties:
                  status:
                    type: string
                  googleData:
                    type: object
                    properties:
                      firstName:
                        type: string
                      lastName:
                        type: string
                      email:
                        type: string
                      fiscalCode:
                        type: string
                    required:
                      - firstName
                      - lastName
                      - email
                      - fiscalCode
                required:
                  - status
                  - googleData
          headers: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /auth/logout:
    post:
      summary: logout
      deprecated: false
      description: Termina la sessione dell'utente corrente.
      tags:
        - Users/Auth
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
          headers: {}
      security: []
  /auth/otp:
    post:
      summary: richiestaOTP
      deprecated: false
      description: >-
        Invia un codice OTP (One-Time Password) via email per la verifica
        dell'identità durante la registrazione di nuovi utenti.
      tags:
        - Users/Auth
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
          headers: {}
      security: []
  /auth/register:
    post:
      summary: userRegistration
      deprecated: false
      description: >-
        Registrazione di un nuovo utente (Cittadino o Amministratore
        pre-autorizzato) dopo la verifica OTP.
      tags:
        - Users/Auth
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                firstName:
                  type: string
                  description: Nome dell'utente.
                lastName:
                  type: string
                  description: Cognome dell'utente.
                fiscalCode:
                  type: string
                  description: Codice fiscale dell'utente.
                email:
                  type: string
                  description: Email dell'utente.
                otp:
                  type: string
                  description: Codice OTP ricevuto via email.
              required:
                - firstName
                - lastName
                - fiscalCode
                - email
                - otp
        required: true
      responses:
        '201':
          description: Utente registrato con successo.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
          headers: {}
        '400':
          description: Richiesta non valida o OTP errato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: Utente già esistente.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '500':
          description: Errore del server.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/me/initiatives:
    get:
      summary: initiativesDashboard
      deprecated: false
      description: >-
        Restituisce i dati per la dashboard personale dell'utente (iniziative
        firmate, create o seguite).
      tags:
        - Users
      parameters:
        - name: relation
          in: query
          description: Tipo di relazione (signed, created, followed).
          required: false
          example: created
          schema:
            type: string
            enum:
              - created
              - signed
              - followed
        - name: currentPage
          in: query
          description: Numero della pagina per la paginazione.
          required: false
          schema:
            type: integer
        - name: objectsPerPage
          in: query
          description: Numero di elementi per pagina.
          required: false
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DetailedInitiative'
                  meta:
                    $ref: '#/components/schemas/MetaDataList'
                required:
                  - data
                  - meta
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/me/notifications:
    get:
      summary: notificationsList
      deprecated: false
      description: >-
        Restituisce la lista delle notifiche dell'utente loggato, con
        possibilità di filtrare per lette/non lette.
      tags:
        - Users
      parameters:
        - name: read
          in: query
          description: Se false, restituisce solo le notifiche non lette.
          required: false
          example: 'false'
          schema:
            type: boolean
        - name: currentPage
          in: query
          description: Numero della pagina per la paginazione.
          required: false
          schema:
            type: integer
        - name: objectsPerPage
          in: query
          description: Numero di elementi per pagina.
          required: false
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
        - name: ETag
          in: header
          description: >-
            Specifica la versione corrispondente della modifica, serve per
            controllare la concorrenza delle risorse alla modifica dello stato. 
          required: false
          example: '"v1"'
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                  meta:
                    $ref: '#/components/schemas/MetaDataList'
                required:
                  - data
                  - meta
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/me/notifications/{id}:
    patch:
      summary: readNotification
      deprecated: false
      description: Segna una specifica notifica come letta.
      tags:
        - Users
      parameters:
        - name: id
          in: path
          description: ID univoco della notifica.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                isRead:
                  type: boolean
                  default: true
                  description: Impostare a true per segnare come letta.
              required:
                - isRead
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/me:
    get:
      summary: getUser
      deprecated: false
      description: Restituisce i dettagli del profilo dell'utente loggato.
      tags:
        - Users
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: false
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users:
    post:
      summary: userRegistration
      deprecated: false
      description: >-
        Registrazione di un nuovo utente (Cittadino o Amministratore) al primo
        accesso.
      tags:
        - Users
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: Email inserita dall'utente.
                googleToken:
                  type: string
                otp:
                  type: string
              required:
                - email
                - googleToken
                - otp
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          headers: {}
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
    get:
      summary: showAdminUsers
      deprecated: false
      description: >-
        Permette agli amministratori di visualizzare e cercare nella lista degli
        utenti registrati.
      tags:
        - Users
      parameters:
        - name: isAdmin
          in: query
          description: Filtra per mostrare solo gli admin.
          required: false
          schema:
            type: boolean
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: 0
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        firstName:
                          type: string
                        lastName:
                          type: string
                        fiscalCode:
                          type: string
                      required:
                        - firstName
                        - lastName
                        - fiscalCode
                required:
                  - data
          headers: {}
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/{id}:
    patch:
      summary: changePrivileges
      deprecated: false
      description: Permette di modificare i privilegi di un utente.
      tags:
        - Users
      parameters:
        - name: id
          in: path
          description: ID univoco dell'utente.
          required: true
          example: 0
          schema:
            type: integer
        - name: X-Mock-User-Id
          in: header
          description: ''
          required: true
          example: ''
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                isAdmin:
                  type: boolean
                  description: Di default false.
              required:
                - isAdmin
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties: {}
          headers: {}
      security: []
  /users/me/notifications/mark-all-as-read:
    patch:
      summary: markAllNotificationsAsRead
      deprecated: false
      description: Segna tutte le notifiche dell'utente corrente come lette.
      tags:
        - Users
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: Simula l'utente loggato
          required: true
          example: 1
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
      responses:
        '200':
          description: Tutte le notifiche sono state segnate come lette.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  updatedCount:
                    type: integer
                    description: Numero di notifiche aggiornate.
                required:
                  - message
                  - updatedCount
          headers: {}
        '401':
          description: Utente non autenticato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '500':
          description: Errore del server.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /users/admin/pre-authorize:
    post:
      summary: preAuthorizeAdmin
      deprecated: false
      description: >-
        Pre-autorizza un codice fiscale per la registrazione come
        amministratore. Solo gli amministratori possono utilizzare questa API.
      tags:
        - Users
      parameters:
        - name: X-Mock-User-Id
          in: header
          description: Simula l'utente loggato (deve essere admin)
          required: true
          example: 1
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                fiscalCode:
                  type: string
                  description: Codice fiscale dell'amministratore da pre-autorizzare.
              required:
                - fiscalCode
        required: true
      responses:
        '201':
          description: Amministratore pre-autorizzato con successo.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  fiscalCode:
                    type: string
                required:
                  - message
                  - fiscalCode
          headers: {}
        '400':
          description: Richiesta non valida.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '401':
          description: Utente non autenticato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '403':
          description: L'utente non ha privilegi di amministratore.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '409':
          description: Codice fiscale già pre-autorizzato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
        '500':
          description: Errore del server.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /categories:
    get:
      summary: categoriesList
      deprecated: false
      description: Restituisce la lista delle categorie.
      tags:
        - Filters
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
                required:
                  - data
          headers: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
  /platforms:
    get:
      summary: platformsList
      deprecated: false
      description: Restituisce la lista delle piattaforme.
      tags:
        - Filters
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Platform'
                required:
                  - data
          headers: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericError'
          headers: {}
      security: []
components:
  schemas:
    DetailedInitiative:
      properties:
        id:
          description: ID univoco dell'iniziativa.
          type: integer
          minimum: 1
          maximum: 2147483647
        title:
          description: Titolo dell'iniziativa.
          type: string
          maxLength: 255
        description:
          description: Descrizione dettagliata della proposta.
          type: string
          maxLength: 65535
        place:
          description: Luogo o area di interesse.
          default: 'NULL'
          type: string
          maxLength: 64
          nullable: true
        status:
          type: string
          description: Stato attuale dell'iniziativa.
          default: '''In corso'''
          enum:
            - In corso
            - Approvata
            - Respinta
            - Scaduta
          nullable: true
        signatures:
          description: Numero di firme raccolte.
          default: '0'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        creationDate:
          type: string
          description: Data di creazione.
          format: date
        expirationDate:
          description: Data di scadenza.
          default: 'NULL'
          type: string
          format: date
          nullable: true
        authorId:
          description: 'ID univoco dell''autore. '
          default: 'NULL'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        categoryId:
          description: ID univoco della categoria.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        platformId:
          description: ID univoco della piattaforma di provenienza.
          default: 'NULL'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        externalURL:
          description: URL di reindirizzamento alla piattaforma esterna.
          default: 'NULL'
          type: string
          maxLength: 500
          nullable: true
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/Attachment'
          description: Array contenente gli eventuali allegati all'iniziativa.
          nullable: true
        reply:
          $ref: '#/components/schemas/Reply'
          description: Eventuale risposta del Comune.
          nullable: true
      type: object
      required:
        - id
        - title
        - description
        - creationDate
        - categoryId
    ParticipatoryBudget:
      type: object
      properties:
        options:
          type: array
          items:
            $ref: '#/components/schemas/PBOption'
          minItems: 3
          maxItems: 3
          description: Array di opzioni.
        id:
          type: integer
          description: ID univoco del bilancio partecipativo.
        creatorId:
          type: integer
          description: ID univoco del creatore del bilancio partecipativo.
        title:
          type: string
          description: Titolo del bilancio partecipativo.
        createdAt:
          type: string
          format: date-time
          description: Data di creazione.
        expirationDate:
          type: string
          format: date
          description: Data di scadenza.
      required:
        - options
        - id
        - creatorId
        - title
        - createdAt
        - expirationDate
    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
        user:
          $ref: '#/components/schemas/User'
        newUserId:
          type: boolean
      required:
        - accessToken
        - user
        - newUserId
    GenericError:
      type: object
      properties:
        timeStamp:
          type: string
          format: date-time
          description: Data e ora dell'errore.
        message:
          type: string
          description: Messaggio dell'errore.
        details:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              issue:
                type: string
            required:
              - field
              - issue
          nullable: true
      required:
        - timeStamp
        - message
    MetaDataList:
      type: object
      properties:
        currentPage:
          type: integer
          description: Numero della pagina per la paginazione.
        objectsPerPage:
          type: integer
          description: Numero di elementi per pagina.
        totalObjects:
          type: integer
          description: Numero totale di oggetti.
        totalPages:
          type: integer
          description: Numero totale di pagine.
      required:
        - currentPage
        - objectsPerPage
        - totalObjects
        - totalPages
    AttachmentNoID:
      properties:
        fileName:
          description: ''
          type: string
          maxLength: 255
        filePath:
          description: ''
          type: string
          maxLength: 500
        fileType:
          description: ''
          default: 'NULL'
          type: string
          maxLength: 50
          nullable: true
        uploadedAt:
          description: ''
          default: current_timestamp()
          type: string
      type: object
      required:
        - fileName
        - filePath
        - uploadedAt
    Attachment:
      properties:
        id:
          description: ID univoco dell'allegato.
          type: integer
          minimum: 1
          maximum: 2147483647
        fileName:
          description: Nome del file.
          type: string
          maxLength: 255
        filePath:
          description: Path del file.
          type: string
          maxLength: 500
        fileType:
          description: Tipo di file.
          default: 'NULL'
          type: string
          maxLength: 50
          nullable: true
        uploadedAt:
          description: Data di caricamento.
          default: current_timestamp()
          type: string
      type: object
      required:
        - id
        - fileName
        - filePath
        - uploadedAt
    Category:
      properties:
        id:
          description: ID univoco della categoria.
          type: integer
          minimum: 1
          maximum: 2147483647
        name:
          description: Nome della categoria.
          type: string
          maxLength: 100
      type: object
      required:
        - id
        - name
    InitiativeSignature:
      properties:
        userId:
          description: ID dell'utente firmatario.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        initiativeId:
          description: ID dell'iniziativa firmata.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        signatureDate:
          description: Data della firma.
          default: current_timestamp()
          type: string
      type: object
      required:
        - userId
        - initiativeId
        - signatureDate
    Initiative:
      properties:
        id:
          description: ID univoco dell'iniziativa.
          type: integer
          minimum: 1
          maximum: 2147483647
        title:
          description: Titolo dell'iniziativa.
          type: string
          maxLength: 255
        place:
          description: Luogo o area di interesse.
          default: 'NULL'
          type: string
          maxLength: 64
          nullable: true
        status:
          type: string
          description: Stato attuale dell'iniziativa.
          default: '''In corso'''
          enum:
            - In corso
            - Approvata
            - Respinta
            - Scaduta
          nullable: true
        signatures:
          description: Numero di firme raccolte.
          default: '0'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        creationDate:
          type: string
          description: Data di creazione.
          format: date
        expirationDate:
          description: Data di scadenza.
          default: 'NULL'
          type: string
          format: date
          nullable: true
        authorId:
          description: 'ID univoco dell''autore. '
          default: 'NULL'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        categoryId:
          description: ID univoco della categoria.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        platformId:
          description: ID univoco della piattaforma.
          default: 'NULL'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        externalURL:
          description: URL di reindirizzamento alla piattaforma esterna.
          default: 'NULL'
          type: string
          maxLength: 500
          nullable: true
        attachment:
          $ref: '#/components/schemas/Attachment'
          description: Immagine
          nullable: true
      type: object
      required:
        - id
        - title
        - creationDate
        - categoryId
    SavedInitiative:
      properties:
        userId:
          description: ID dell'utente che ha salvato l'iniziativa.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        initiativeId:
          description: ID dell'iniziativa salvata.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        savedAt:
          description: Data di salvataggio.
          default: current_timestamp()
          type: string
      type: object
      required:
        - userId
        - initiativeId
        - savedAt
    Notification:
      properties:
        id:
          description: ID univoco della notifica.
          type: integer
          minimum: 1
          maximum: 2147483647
        text:
          description: Contenuto della notifica.
          type: string
          maxLength: 65535
        isRead:
          type: boolean
          description: Flag che indica se è stata letta o no.
          nullable: true
        creationDate:
          description: Data di creazione.
          default: current_timestamp()
          type: string
        linkRef:
          description: ''
          default: 'NULL'
          type: string
          maxLength: 255
          nullable: true
      type: object
      required:
        - id
        - text
        - creationDate
    PBOption:
      properties:
        id:
          description: ID univoco dell'opzione.
          type: integer
          minimum: 1
          maximum: 2147483647
        text:
          description: Testo di descrizione dell'opzione.
          type: string
          maxLength: 250
        position:
          description: >-
            Posizione relativa alla numerazione nell'elenco di opzioni del
            bilancio.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
      type: object
      required:
        - id
        - text
        - position
    Platform:
      properties:
        id:
          description: ID univoco della piattaforma.
          type: integer
          minimum: 1
          maximum: 2147483647
        platformName:
          description: Nome della piattaforma.
          type: string
          maxLength: 100
        iconPath:
          description: Path dell'icona.
          default: 'NULL'
          type: string
          maxLength: 255
          nullable: true
        platformLink:
          description: Link di reindirizzamento alla piattaforma.
          default: 'NULL'
          type: string
          maxLength: 255
          nullable: true
      type: object
      required:
        - id
        - platformName
    Reply:
      properties:
        id:
          description: ID univoco della risposta.
          type: integer
          minimum: 1
          maximum: 2147483647
        initiativeId:
          description: ID univoco dell'iniziativa a cui è rivolta la risposta.
          type: integer
          minimum: -2147483648
          maximum: 2147483647
        adminId:
          description: ID univoco dell'amministratore che ha fornito la risposta.
          default: 'NULL'
          type: integer
          minimum: -2147483648
          maximum: 2147483647
          nullable: true
        replyText:
          description: Testo di esposizione delle motivazioni della risposta.
          type: string
          maxLength: 65535
        creationDate:
          description: Data di creazione.
          default: current_timestamp()
          type: string
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentNoID'
          description: Eventuali allegati (immagini o PDF)
          nullable: true
      type: object
      required:
        - id
        - initiativeId
        - replyText
        - creationDate
    User:
      properties:
        id:
          description: ID univoco dell'utente.
          type: integer
          minimum: 1
          maximum: 2147483647
        firstName:
          description: Nome dell'utente.
          type: string
          maxLength: 100
        lastName:
          description: Cognome dell'utente.
          type: string
          maxLength: 100
        fiscalCode:
          description: Codice fiscale dell'utente.
          type: string
          maxLength: 16
        email:
          description: Email dell'utente.
          type: string
          maxLength: 150
        isAdmin:
          type: boolean
          description: >-
            Flag che determina se l'utente può svolgere il ruolo di
            amministratore.
        isCitizen:
          type: boolean
          description: Flag che determina se l'utente può svolgere il ruolo di cittadino.
        createdAt:
          description: Data di registrazione.
          default: current_timestamp()
          type: string
      type: object
      required:
        - id
        - firstName
        - lastName
        - fiscalCode
        - email
        - createdAt
        - isAdmin
        - isCitizen
  responses: {}
  securitySchemes: {}
servers: []
security: []
\end{minted}